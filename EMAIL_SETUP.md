# 邮件发送功能设置说明

## 概述
本项目已集成 nodemailer + Gmail SMTP 邮件发送功能，当用户填写联系表单后，系统会自动发送邮件到指定的 Gmail 地址。

## 配置信息
- **Gmail 用户**: hanpuku01@gmail.com
- **应用密码**: ucnn ovxx aesc vhrj
- **目标邮箱**: hanpuku01@gmail.com（接收联系表单邮件）

## 功能特性

### 1. 表单验证
- 必填字段验证（姓名、邮箱、服务类型）
- 邮箱格式验证
- 前端和后端双重验证

### 2. 邮件内容
邮件包含以下信息：
- 客户姓名
- 邮箱地址
- 电话号码（可选）
- 服务需求
- 详细消息（可选）
- 发送时间

### 3. 邮件模板
使用专业的 HTML 邮件模板，包含：
- 公司品牌色彩
- 结构化的信息展示
- 响应式设计
- 日语界面

### 4. 错误处理
- 网络错误处理
- SMTP 连接错误处理
- 用户友好的错误提示

## 文件结构

```
app/api/contact/route.ts          # 邮件发送 API 路由
components/sections/ContactSection.tsx  # 联系表单组件
```

## 使用方法

### 1. 启动开发服务器
```bash
npm run dev
```

### 2. 访问联系表单
打开浏览器访问 `http://localhost:3000`，滚动到页面底部的"お問い合わせ"部分。

### 3. 填写表单
- 填写必填字段（姓名、邮箱、服务类型）
- 可选填写电话号码和详细消息
- 点击"送信"按钮

### 4. 查看邮件
邮件将自动发送到 `hanpuku01@gmail.com`，请检查收件箱。

## 安全注意事项

### 1. 环境变量
建议将 Gmail 凭据移到环境变量中：
```bash
# .env.local
GMAIL_USER=hanpuku01@gmail.com
GMAIL_PASS=ucnn ovxx aesc vhrj
```

### 2. 应用密码
当前使用的是 Gmail 应用密码，比普通密码更安全。如需更改：
1. 访问 Google 账户设置
2. 开启两步验证
3. 生成新的应用密码
4. 更新环境变量

### 3. 生产环境
在生产环境中：
- 使用环境变量存储敏感信息
- 配置适当的 CORS 设置
- 添加速率限制
- 启用 HTTPS

## 故障排除

### 1. 邮件发送失败
- 检查 Gmail 应用密码是否正确
- 确认网络连接正常
- 查看服务器日志

### 2. 表单提交失败
- 检查必填字段是否完整
- 确认邮箱格式正确
- 查看浏览器控制台错误

### 3. API 错误
- 检查 API 路由是否正确
- 确认服务器正在运行
- 查看服务器日志

## 自定义配置

### 1. 更改目标邮箱
在 `app/api/contact/route.ts` 中修改：
```typescript
to: 'your-email@gmail.com', // 更改为目标邮箱
```

### 2. 修改邮件模板
在 `app/api/contact/route.ts` 中的 `mailOptions.html` 部分修改邮件模板。

### 3. 添加新字段
1. 在 `ContactSection.tsx` 中添加表单字段
2. 在 `route.ts` 中更新验证逻辑
3. 在邮件模板中添加新字段显示

## 技术支持
如有问题，请检查：
1. 服务器日志
2. 浏览器控制台
3. 网络连接状态
4. Gmail 账户设置
